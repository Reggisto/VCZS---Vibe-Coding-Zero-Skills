<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibe-Oracle Ultra | DEMO & REAL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0a0b0d; color: #00ff41; font-family: 'Courier New', monospace; }
        .terminal-border { border: 1px solid #1e293b; border-radius: 8px; background: #111827; }
        .mode-demo { border-left: 5px solid #3b82f6; }
        .mode-real { border-left: 5px solid #ef4444; }
        input { background: #1f2937 !important; color: #00ff41 !important; border: 1px solid #374151 !important; }
    </style>
</head>
<body class="p-4">

    <header class="flex justify-between items-center mb-4 border-b border-green-900 pb-2">
        <h1 class="text-lg font-bold">Vibe-Oracle v1.1</h1>
        <div id="mode-indicator" class="px-2 py-1 rounded text-[10px] bg-blue-900 text-white font-bold">MODE: DEMO</div>
    </header>

    <div class="grid grid-cols-1 gap-4">
        
        <div class="terminal-border p-3 flex justify-between items-center">
            <span class="text-xs uppercase font-bold">Tipo Operatività:</span>
            <button id="toggleMode" onclick="toggleMode()" class="bg-blue-600 px-4 py-2 rounded-full text-xs font-bold text-white transition-all">PASSA A REAL</button>
        </div>

        <div id="wallet-section" class="hidden terminal-border p-3">
            <label class="text-[10px] text-slate-400">INDIRIZZO WALLET POLYGON (USDC)</label>
            <input type="text" id="walletAddress" placeholder="0x..." class="w-full p-2 text-xs rounded mt-1">
        </div>

        <div class="terminal-border p-3 space-y-3">
            <div>
                <label class="text-[10px] text-slate-400">GEMINI API KEY</label>
                <input type="password" id="apiKey" class="w-full p-2 text-xs rounded">
            </div>
            <div class="grid grid-cols-2 gap-2">
                <div>
                    <label class="text-[10px] text-slate-400">BUDGET ($)</label>
                    <input type="number" id="budget" value="1000" class="w-full p-2 text-xs rounded">
                </div>
                <div>
                    <label class="text-[10px] text-slate-400">EXIT TARGET %</label>
                    <input type="number" id="targetExit" value="2" class="w-full p-2 text-xs rounded">
                </div>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-2">
            <div class="terminal-border p-3 text-center">
                <p class="text-[9px] uppercase">ROI Simulato</p>
                <p id="roi-display" class="text-lg font-bold">+0.00%</p>
            </div>
            <div class="terminal-border p-3 text-center">
                <p class="text-[9px] uppercase">Cicli Chiusi</p>
                <p id="cycle-display" class="text-lg font-bold">0</p>
            </div>
        </div>

        <button onclick="fabbricaOracle()" class="w-full bg-green-600 text-black font-bold py-3 rounded uppercase text-sm">Inizializza Terminale</button>

        <div id="output-area" class="hidden terminal-border p-2 bg-white">
            <iframe id="frame" class="w-full h-64 border-none"></iframe>
        </div>
    </div>

    <script>
        let isReal = false;
        function toggleMode() {
            isReal = !isReal;
            const btn = document.getElementById('toggleMode');
            const ind = document.getElementById('mode-indicator');
            const wallet = document.getElementById('wallet-section');
            if(isReal) {
                btn.innerText = "TORNA A DEMO";
                btn.classList.replace('bg-blue-600', 'bg-red-600');
                ind.innerText = "MODE: REAL";
                ind.classList.replace('bg-blue-900', 'bg-red-900');
                wallet.classList.remove('hidden');
            } else {
                btn.innerText = "PASSA A REAL";
                btn.classList.replace('bg-red-600', 'bg-blue-600');
                ind.innerText = "MODE: DEMO";
                ind.classList.replace('bg-red-900', 'bg-blue-900');
                wallet.classList.add('hidden');
            }
        }

        async function fabbricaOracle() {
            const k = document.getElementById('apiKey').value;
            if(!k) return alert("Inserisci API Key!");
            
            // Qui inseriamo la logica di chiamata a Gemini che genera l'interfaccia di trading
            // Il sistema userà il prompt per creare il bot con WebSocket Binance e Logica Dutch
            document.getElementById('output-area').classList.remove('hidden');
            document.getElementById('frame').srcdoc = "<h1>Terminale Connesso...</h1><p>In attesa di dati da Binance e Polymarket via VPN.</p>";
            
            // Nota: In modalità DEMO, i calcoli ROI verranno simulati localmente ogni volta che Binance tocca il prezzo target.
        }
    </script>
</body>
</html>
